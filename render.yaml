services:
  - type: web
    name: foreign-language-assessment
    env: python  # Using native Python buildpack for free tier
    region: frankfurt  # or your preferred region
    plan: free  # Free tier with native buildpack
    buildCommand: "./build.sh"
    startCommand: "PATH=/opt/render/project/.ffmpeg:$PATH uvicorn backend.main:app --host 0.0.0.0 --port $PORT"

    # Environment variables - configure these in Render Dashboard
    envVars:
      - key: APP_SECRET_TOKEN
        generateValue: true  # Render will generate a secure token
      # Note: APP_BASE_URL uses Render's auto-generated RENDER_EXTERNAL_URL
      # No need to manually configure the URL - it's automatically available!
      - key: REPORT_LANGUAGE
        value: en
      - key: STORE_TRANSCRIPTS
        value: true
      # Email and GPT5 keys should be added manually in Render Dashboard for security

    # Persistent disk for audio files and reports
    disk:
      name: assessment-data
      mountPath: /opt/render/project/src
      sizeGB: 1

    # Health check configuration
    healthCheckPath: /health

    # Auto-deploy from main branch
    autoDeploy: true
